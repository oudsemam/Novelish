{"ast":null,"code":"/* eslint-disable @typescript-eslint/explicit-function-return-type */\n\n/* eslint-disable @typescript-eslint/typedef */\n\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isThenable } from './is';\n/** SyncPromise internal states */\n\nvar States;\n\n(function (States) {\n  /** Pending */\n  States[\"PENDING\"] = \"PENDING\";\n  /** Resolved / OK */\n\n  States[\"RESOLVED\"] = \"RESOLVED\";\n  /** Rejected / Error */\n\n  States[\"REJECTED\"] = \"REJECTED\";\n})(States || (States = {}));\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\n\n\nvar SyncPromise =\n/** @class */\nfunction () {\n  function SyncPromise(executor) {\n    var _this = this;\n\n    this._state = States.PENDING;\n    this._handlers = [];\n    /** JSDoc */\n\n    this._resolve = function (value) {\n      _this._setResult(States.RESOLVED, value);\n    };\n    /** JSDoc */\n\n\n    this._reject = function (reason) {\n      _this._setResult(States.REJECTED, reason);\n    };\n    /** JSDoc */\n\n\n    this._setResult = function (state, value) {\n      if (_this._state !== States.PENDING) {\n        return;\n      }\n\n      if (isThenable(value)) {\n        void value.then(_this._resolve, _this._reject);\n        return;\n      }\n\n      _this._state = state;\n      _this._value = value;\n\n      _this._executeHandlers();\n    }; // TODO: FIXME\n\n    /** JSDoc */\n\n\n    this._attachHandler = function (handler) {\n      _this._handlers = _this._handlers.concat(handler);\n\n      _this._executeHandlers();\n    };\n    /** JSDoc */\n\n\n    this._executeHandlers = function () {\n      if (_this._state === States.PENDING) {\n        return;\n      }\n\n      var cachedHandlers = _this._handlers.slice();\n\n      _this._handlers = [];\n      cachedHandlers.forEach(function (handler) {\n        if (handler.done) {\n          return;\n        }\n\n        if (_this._state === States.RESOLVED) {\n          if (handler.onfulfilled) {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            handler.onfulfilled(_this._value);\n          }\n        }\n\n        if (_this._state === States.REJECTED) {\n          if (handler.onrejected) {\n            handler.onrejected(_this._value);\n          }\n        }\n\n        handler.done = true;\n      });\n    };\n\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n  /** JSDoc */\n\n\n  SyncPromise.resolve = function (value) {\n    return new SyncPromise(function (resolve) {\n      resolve(value);\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.reject = function (reason) {\n    return new SyncPromise(function (_, reject) {\n      reject(reason);\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.all = function (collection) {\n    return new SyncPromise(function (resolve, reject) {\n      if (!Array.isArray(collection)) {\n        reject(new TypeError(\"Promise.all requires an array as input.\"));\n        return;\n      }\n\n      if (collection.length === 0) {\n        resolve([]);\n        return;\n      }\n\n      var counter = collection.length;\n      var resolvedCollection = [];\n      collection.forEach(function (item, index) {\n        void SyncPromise.resolve(item).then(function (value) {\n          resolvedCollection[index] = value;\n          counter -= 1;\n\n          if (counter !== 0) {\n            return;\n          }\n\n          resolve(resolvedCollection);\n        }).then(null, reject);\n      });\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.then = function (onfulfilled, onrejected) {\n    var _this = this;\n\n    return new SyncPromise(function (resolve, reject) {\n      _this._attachHandler({\n        done: false,\n        onfulfilled: function (result) {\n          if (!onfulfilled) {\n            // TODO: ¯\\_(ツ)_/¯\n            // TODO: FIXME\n            resolve(result);\n            return;\n          }\n\n          try {\n            resolve(onfulfilled(result));\n            return;\n          } catch (e) {\n            reject(e);\n            return;\n          }\n        },\n        onrejected: function (reason) {\n          if (!onrejected) {\n            reject(reason);\n            return;\n          }\n\n          try {\n            resolve(onrejected(reason));\n            return;\n          } catch (e) {\n            reject(e);\n            return;\n          }\n        }\n      });\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.catch = function (onrejected) {\n    return this.then(function (val) {\n      return val;\n    }, onrejected);\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.finally = function (onfinally) {\n    var _this = this;\n\n    return new SyncPromise(function (resolve, reject) {\n      var val;\n      var isRejected;\n      return _this.then(function (value) {\n        isRejected = false;\n        val = value;\n\n        if (onfinally) {\n          onfinally();\n        }\n      }, function (reason) {\n        isRejected = true;\n        val = reason;\n\n        if (onfinally) {\n          onfinally();\n        }\n      }).then(function () {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve(val);\n      });\n    });\n  };\n  /** JSDoc */\n\n\n  SyncPromise.prototype.toString = function () {\n    return '[object SyncPromise]';\n  };\n\n  return SyncPromise;\n}();\n\nexport { SyncPromise }; //# sourceMappingURL=syncpromise.js.map","map":{"version":3,"sources":["C:/Users/mechi/Developer/novelish/node_modules/@sentry/utils/esm/syncpromise.js"],"names":["isThenable","States","SyncPromise","executor","_this","_state","PENDING","_handlers","_resolve","value","_setResult","RESOLVED","_reject","reason","REJECTED","state","then","_value","_executeHandlers","_attachHandler","handler","concat","cachedHandlers","slice","forEach","done","onfulfilled","onrejected","e","resolve","reject","_","all","collection","Array","isArray","TypeError","length","counter","resolvedCollection","item","index","prototype","result","catch","val","finally","onfinally","isRejected","toString"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/typedef */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isThenable } from './is';\n/** SyncPromise internal states */\nvar States;\n(function (States) {\n    /** Pending */\n    States[\"PENDING\"] = \"PENDING\";\n    /** Resolved / OK */\n    States[\"RESOLVED\"] = \"RESOLVED\";\n    /** Rejected / Error */\n    States[\"REJECTED\"] = \"REJECTED\";\n})(States || (States = {}));\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nvar SyncPromise = /** @class */ (function () {\n    function SyncPromise(executor) {\n        var _this = this;\n        this._state = States.PENDING;\n        this._handlers = [];\n        /** JSDoc */\n        this._resolve = function (value) {\n            _this._setResult(States.RESOLVED, value);\n        };\n        /** JSDoc */\n        this._reject = function (reason) {\n            _this._setResult(States.REJECTED, reason);\n        };\n        /** JSDoc */\n        this._setResult = function (state, value) {\n            if (_this._state !== States.PENDING) {\n                return;\n            }\n            if (isThenable(value)) {\n                void value.then(_this._resolve, _this._reject);\n                return;\n            }\n            _this._state = state;\n            _this._value = value;\n            _this._executeHandlers();\n        };\n        // TODO: FIXME\n        /** JSDoc */\n        this._attachHandler = function (handler) {\n            _this._handlers = _this._handlers.concat(handler);\n            _this._executeHandlers();\n        };\n        /** JSDoc */\n        this._executeHandlers = function () {\n            if (_this._state === States.PENDING) {\n                return;\n            }\n            var cachedHandlers = _this._handlers.slice();\n            _this._handlers = [];\n            cachedHandlers.forEach(function (handler) {\n                if (handler.done) {\n                    return;\n                }\n                if (_this._state === States.RESOLVED) {\n                    if (handler.onfulfilled) {\n                        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                        handler.onfulfilled(_this._value);\n                    }\n                }\n                if (_this._state === States.REJECTED) {\n                    if (handler.onrejected) {\n                        handler.onrejected(_this._value);\n                    }\n                }\n                handler.done = true;\n            });\n        };\n        try {\n            executor(this._resolve, this._reject);\n        }\n        catch (e) {\n            this._reject(e);\n        }\n    }\n    /** JSDoc */\n    SyncPromise.resolve = function (value) {\n        return new SyncPromise(function (resolve) {\n            resolve(value);\n        });\n    };\n    /** JSDoc */\n    SyncPromise.reject = function (reason) {\n        return new SyncPromise(function (_, reject) {\n            reject(reason);\n        });\n    };\n    /** JSDoc */\n    SyncPromise.all = function (collection) {\n        return new SyncPromise(function (resolve, reject) {\n            if (!Array.isArray(collection)) {\n                reject(new TypeError(\"Promise.all requires an array as input.\"));\n                return;\n            }\n            if (collection.length === 0) {\n                resolve([]);\n                return;\n            }\n            var counter = collection.length;\n            var resolvedCollection = [];\n            collection.forEach(function (item, index) {\n                void SyncPromise.resolve(item)\n                    .then(function (value) {\n                    resolvedCollection[index] = value;\n                    counter -= 1;\n                    if (counter !== 0) {\n                        return;\n                    }\n                    resolve(resolvedCollection);\n                })\n                    .then(null, reject);\n            });\n        });\n    };\n    /** JSDoc */\n    SyncPromise.prototype.then = function (onfulfilled, onrejected) {\n        var _this = this;\n        return new SyncPromise(function (resolve, reject) {\n            _this._attachHandler({\n                done: false,\n                onfulfilled: function (result) {\n                    if (!onfulfilled) {\n                        // TODO: ¯\\_(ツ)_/¯\n                        // TODO: FIXME\n                        resolve(result);\n                        return;\n                    }\n                    try {\n                        resolve(onfulfilled(result));\n                        return;\n                    }\n                    catch (e) {\n                        reject(e);\n                        return;\n                    }\n                },\n                onrejected: function (reason) {\n                    if (!onrejected) {\n                        reject(reason);\n                        return;\n                    }\n                    try {\n                        resolve(onrejected(reason));\n                        return;\n                    }\n                    catch (e) {\n                        reject(e);\n                        return;\n                    }\n                },\n            });\n        });\n    };\n    /** JSDoc */\n    SyncPromise.prototype.catch = function (onrejected) {\n        return this.then(function (val) { return val; }, onrejected);\n    };\n    /** JSDoc */\n    SyncPromise.prototype.finally = function (onfinally) {\n        var _this = this;\n        return new SyncPromise(function (resolve, reject) {\n            var val;\n            var isRejected;\n            return _this.then(function (value) {\n                isRejected = false;\n                val = value;\n                if (onfinally) {\n                    onfinally();\n                }\n            }, function (reason) {\n                isRejected = true;\n                val = reason;\n                if (onfinally) {\n                    onfinally();\n                }\n            }).then(function () {\n                if (isRejected) {\n                    reject(val);\n                    return;\n                }\n                resolve(val);\n            });\n        });\n    };\n    /** JSDoc */\n    SyncPromise.prototype.toString = function () {\n        return '[object SyncPromise]';\n    };\n    return SyncPromise;\n}());\nexport { SyncPromise };\n//# sourceMappingURL=syncpromise.js.map"]},"metadata":{},"sourceType":"module"}